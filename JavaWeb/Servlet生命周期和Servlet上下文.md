### Servlet生命周期
###### Servlet生命周期分为以下四个阶段：
1. 加载和实例化阶段：Servlet容器负责加载和实例化Servlet，当Servlet容器启动时，或者在容器检测需要这个Servlet来响应第一个请求时，创建Servlet实例。当Servlet容器启动后，它必须要知道所需的Servlet类在什么位置，Servlet容器可以从本地文件系统、远程文件系统或者其他网络服务中通过类加载器加载Servlet类，成功加载后，容器创建Servlet的实例。因为容器时通过Java的反射API来创建Servlet实例，调用的时Servlet的默认构造函数，也就是不带参数的构造函数，所以我们在编写Servlet类时，不应该提供带参数的构造函数。
2. 初始化阶段：在Servlet实例化之后，容器必须调用Servlet的init()方法初始化这个对象。初始化的目的是为了让Servlet对象在处理客户请求前完成一些初始化的工作，如建立数据库的连接，获取配置信息等。对于每一个Servlet实例，init()方法只能被调用一次。在初始化期间，Servlet实例可以使用容器为它准备的ServletConfig对象从Web应用程序的配置信息(在web.xml中配置)中获取初始化的参数信息。如果这个过程中发生错误，Servlet实例可以抛出ServletException异常或者UnavailableException异常来通知容器。ServletException异常用于指明一般的初始化失败，例如，没有找到初始化参数；而UnavailableException异常用于通知容器该Servlet实例不可用。例如，数据库服务器没有启动，数据库连接无法建立，Servlet就可以抛出UnavailableException异常想容器指定它暂时或永久不可用。
3. 处理请求阶段：Servlet容器调用Servlet的service方法对请求进行处理。要注意的是，在service()方法调用之前，init()方法必须成功执行。在service()方法中，Servlet实例通过ServletRequest对象得到客户端的相关信息和请求信息，在对请求进行处理后，调用ServletResponse对象的方法设置响应信息。在service()方法执行期间，如果发生错误，Servlet实例可以抛出ServletException异常或者UnavailableException异常。
4. 服务终止阶段：当容器检测到一个Servlet实例应该从服务中被移除的时候，容器就会调用实例的destroy()方法，以便让该实例可以释放它所使用的资源，保存数据到持久储存设备中。当需要释放内存或者容器关闭时，容器就会调用Servlet实例的destroy()方法。在destroy()方法调用之后，容器释放这个Servlet实例，该实例随后会被Java的垃圾收集器所回收。如果再次需要这个Servlet处理请求，Servlet容器会创建一个新的Servlet实例。

###### Servlet上下文
运行在Java虚拟机中的每一个Web应用程序都有一个与之相关的Servlet上下文。Java Servlet API提供一个ServletContext接口来表示上下文。在这个接口中定义了一组方法，Servlet可以使用这些方法与它的Servlet容器进行通信。一个ServletContext对象表示一个Web应用程序的上下文。Servlet容器在Servlet初始化期间，向其传递servletConfig对象，可以通过ServletConfig对象的getServletContext()方法来得到ServletContext对象。也可以通过GenericServlet对象的getServletContext()方法来得到ServletContext对象，其实GenericServlet类的getServletContext()也是调用ServletConfig对象的getServletContext()方法来得到这个对象的。

###### 请求转发
1. RequestDispatcher接口
RequestDispatcher对象由Servlet容器创建，用于封装一个由路劲所标识的服务器资源。利用RequestDispatcher对象，可以把请求转发给其他的Servlet或JSP页面。
在RequestDispatcher接口中定义了两种方法：
* forward：该方法用于将请求从一个Servlet传递给服务器上的另外的Servlet、JSP页面或者是HTML文件。在Servlet中，可以对请求做一个初步的处理，然后调用这个方法，将请求传递给其他的资源类生成响应。要注意的是，这个方法必须在响应被提交给客户端之前调用，否则的话，它将抛出IllegalStateException异常。**在forward()方法调用之后，原先在响应缓存中的没有提交的内容将被自动清除**。
* include：该方法用于在响应中包含其他资源(Servlet、JSP页面或HTML文件)的内容。和forward()方法的区别在于：利用include()方法将请求转发给其他的Servlet，被调用的Servlet对该请求做出响应将并入原先的响应对象中，原先的Servlet还可以继续输出响应信息。而利用forward()方法将请求转发给其他的Servlet，将由被调用的Servlet负责对请求做出响应，而原先Servlet的执行则终止。

2. 三种方法可以用来得到RequestDispatcher对象。
* 利用ServletRequest接口中的getRequestDispatcher()方法；
* servletContext接口中的getNamedDispatcher()和getRequestDispatcher()方法；